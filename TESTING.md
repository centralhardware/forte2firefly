# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è OCR

## –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
**–ö–æ–º–∞–Ω–¥–∞:** `./gradlew test --tests "OCRTest"`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASSED  
**–í—Ä–µ–º—è:** ~1.7 —Å–µ–∫—É–Ω–¥

### –¢–µ—Å—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç  
**–ö–æ–º–∞–Ω–¥–∞:** `./gradlew run`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–í—Ä–µ–º—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:** 1752ms

## –†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

```
02:18 4 oe 23

< Purchase

0

NSK GROCER- QCM
-18,29 $

¬Æ In processing

Transaction details

Date and time

09 november's 2025 15:37:39

From

Card Solo Visa Signature MLT **1293

Transaction N2

12165085404

Transaction amount

TABS
```

## –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ OCR

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ:
- –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞: `NSK GROCER- QCM`
- –°—É–º–º–∞ —Å –≤–∞–ª—é—Ç–æ–π: `-18,29 $`
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: `09 november's 2025 15:37:39`
- –ö–∞—Ä—Ç–∞: `Card Solo Visa Signature MLT **1293`
- –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: `12165085404`

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:
- `Transaction amount: TABS` –≤–º–µ—Å—Ç–æ `75.5` (–∫—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞)
- –õ–∏—à–Ω–∏–π —Ç–µ–∫—Å—Ç —Å–≤–µ—Ä—Ö—É: `02:18 4 oe 23` –∏ `< Purchase`

### üí° –ü—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫:
1. Tesseract –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–µ—Ç–∫–∏–º –ø–µ—á–∞—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
2. –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç UI —ç–ª–µ–º–µ–Ω—Ç—ã (–∏–∫–æ–Ω–∫–∏, –≤—Ä–µ–º—è)
3. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ü–∏—Ñ—Ä—ã –ø–ª–æ—Ö–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```kotlin
// –£–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è recognizeTextWithPreprocessing()
ocrService.recognizeTextWithPreprocessing(photoBytes)
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Vision API
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π OCR:
- Google Cloud Vision API (–ø–ª–∞—Ç–Ω–æ, –Ω–æ –æ—á–µ–Ω—å —Ç–æ—á–Ω–æ)
- AWS Textract
- Azure Computer Vision

### 3. –£–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞
–°–¥–µ–ª–∞—Ç—å –ø–∞—Ä—Å–µ—Ä –±–æ–ª–µ–µ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ã–º –∫ –æ—à–∏–±–∫–∞–º OCR:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å regex —Å –Ω–µ—á–µ—Ç–∫–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ "Transaction amount" –≤—Å–µ–≥–¥–∞ —á–∏—Å–ª–æ)
- –î–æ–±–∞–≤–∏—Ç—å fallback –≤–∞—Ä–∏–∞–Ω—Ç—ã

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tesseract
brew install tesseract  # macOS
sudo apt-get install tesseract-ocr  # Ubuntu

# –ü—Ä–æ–≤–µ—Ä–∫–∞
tesseract --version
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞
–í `build.gradle.kts` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```kotlin
tasks.test {
    systemProperty("jna.library.path", "/opt/homebrew/lib")
    environment("TESSDATA_PREFIX", "/opt/homebrew/share/tessdata")
}

tasks.run.configure {
    systemProperty("jna.library.path", "/opt/homebrew/lib")
    environment("TESSDATA_PREFIX", "/opt/homebrew/share/tessdata")
}
```

### –ö–æ–º–∞–Ω–¥—ã

**–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:**
```bash
./gradlew test
```

**–ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ OCR —Ç–µ—Å—Ç–æ–≤:**
```bash
./gradlew test --tests "OCRTest"
```

**–ó–∞–ø—É—Å–∫ –¥–µ–º–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã:**
```bash
./gradlew run
```

## –í—ã–≤–æ–¥—ã

‚úÖ **OCR —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- Tesseract —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚ö†Ô∏è **–ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è**
- Tesseract —Ö–æ—Ä–æ—à –¥–ª—è –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –Ω–æ –Ω–µ –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Google Vision API –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏
- –ü–∞—Ä—Å–µ—Ä –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –æ—à–∏–±–∫–∞–º

üéØ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å OCR –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ –±—É–¥—É—â–µ–º
